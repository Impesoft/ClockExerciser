<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ClockExerciser.Pages.SettingsPage"
             Title="{Binding SettingsTitle}">
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            
            <!-- Language Selection -->
            <Border Padding="15" 
                    BackgroundColor="{AppThemeBinding Light=#f5f5f5, Dark=#2b2b2b}"
                    StrokeThickness="1"
                    Stroke="{AppThemeBinding Light=#e0e0e0, Dark=#404040}">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="10">
                    <Label Text="{Binding LanguageLabel}" 
                           FontSize="16" 
                           FontAttributes="Bold" />
                    <Picker ItemsSource="{Binding AvailableLanguages}"
                            ItemDisplayBinding="{Binding NativeName}"
                            SelectedItem="{Binding SelectedLanguage}" />
                </VerticalStackLayout>
            </Border>
            
            <!-- Voice Output Section -->
            <Border Padding="15"
                    BackgroundColor="{AppThemeBinding Light=#f5f5f5, Dark=#2b2b2b}"
                    StrokeThickness="1"
                    Stroke="{AppThemeBinding Light=#e0e0e0, Dark=#404040}">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="10">
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Text="{Binding VoiceOutputLabel}" 
                               FontSize="16" 
                               FontAttributes="Bold"
                               VerticalOptions="Center"
                               Grid.Column="0" />
                        <Switch IsToggled="{Binding VoiceOutputEnabled}" 
                                Grid.Column="1" />
                    </Grid>
                    
                    <Label Text="{Binding VoiceOutputDescription}" 
                           FontSize="12" 
                           TextColor="{AppThemeBinding Light=#757575, Dark=#9e9e9e}" />
                    
                    <!-- Locale Selection (visible when enabled) -->
                    <VerticalStackLayout IsVisible="{Binding VoiceOutputEnabled}" 
                                         Spacing="10" 
                                         Padding="0,10,0,0">
                        
                        <Label Text="{Binding VoiceRegionLabel}" 
                               FontSize="14" 
                               FontAttributes="Bold" />
                        <Picker ItemsSource="{Binding AvailableRegions}"
                                ItemDisplayBinding="{Binding DisplayName}"
                                SelectedItem="{Binding SelectedRegion}"
                                BackgroundColor="{AppThemeBinding Light=White, Dark=#1e1e1e}" />
                        
                        <Button Text="{Binding TestVoiceButtonText}"
                                Command="{Binding TestVoiceCommand}"
                                BackgroundColor="{StaticResource Primary}"
                                TextColor="White"
                                Margin="0,10,0,0"
                                HeightRequest="44" />
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>
            
            <!-- Voice Input Section -->
            <Border Padding="15"
                    BackgroundColor="{AppThemeBinding Light=#f5f5f5, Dark=#2b2b2b}"
                    StrokeThickness="1"
                    Stroke="{AppThemeBinding Light=#e0e0e0, Dark=#404040}">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="10">
                    <Grid ColumnDefinitions="*,Auto">
                        <Label Text="{Binding VoiceInputLabel}" 
                               FontSize="16" 
                               FontAttributes="Bold"
                               VerticalOptions="Center"
                               Grid.Column="0" />
                        <Switch IsToggled="{Binding VoiceInputEnabled}" 
                                Grid.Column="1" />
                    </Grid>
                    
                    <Label Text="{Binding VoiceInputDescription}" 
                           FontSize="12" 
                           TextColor="{AppThemeBinding Light=#757575, Dark=#9e9e9e}" />
                </VerticalStackLayout>
            </Border>
            
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
